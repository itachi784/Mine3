<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A Celestial Birthday Quest</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;500&display=swap');

        body { 
            margin: 0; 
            background: #0b0d17; /* Deep Space */
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            overflow: hidden; 
            font-family: 'Quicksand', sans-serif; 
        }

        .ui { 
            color: #ffdde1; 
            margin-top: 15px; 
            text-align: center; 
            text-shadow: 0 0 10px rgba(255,192,203,0.8);
        }

        h1 { font-family: 'Dancing Script', cursive; font-size: 2.5rem; margin: 0; }

        canvas { 
            background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%);
            border: 2px solid #f8bbd0; 
            border-radius: 20px; 
            box-shadow: 0 0 40px rgba(255, 105, 180, 0.2); 
            cursor: none; 
        }

        #winMessage { 
            display: none; 
            position: absolute; 
            background: rgba(15, 15, 25, 0.95); 
            padding: 40px; 
            border-radius: 30px; 
            text-align: center; 
            border: 2px solid #ffafbd;
            box-shadow: 0 0 50px rgba(255, 175, 189, 0.5);
            color: white;
            z-index: 10;
        }

        .mine-button {
            padding: 15px 40px; 
            cursor: pointer; 
            color: #fff; 
            font-size: 24px; 
            font-family: 'Dancing Script', cursive;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            box-shadow: 0 4px 15px rgba(255, 154, 158, 0.4);
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .mine-button:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 154, 158, 0.6);
        }

        #score-tag {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #ffafbd;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="ui">
        <h1>Catch the Falling Stars</h1>
        <p>Guide the cake to gather 10 pieces of my heart...</p>
    </div>

    <canvas id="gameCanvas" width="800" height="500"></canvas>

    <div id="winMessage">
        <h1 style="font-size: 60px; color: #ffafbd;">You Found Me.</h1>
        <p style="font-size: 22px; line-height: 1.6;">Every heart you caught is a reason why I'm <br> so grateful you were born today.</p>
        <div style="margin: 25px 0;">
            <span style="font-size: 40px;">ðŸŽ‚âœ¨ðŸ’–</span>
        </div>
        <a href="index.html" style="text-decoration: none;">
            <button class="mine-button">Open Your Real Gift</button>
        </a>
        <br>
        <button onclick="location.reload()" style="background:transparent; border:none; color:#aaa; margin-top:20px; cursor:pointer;">Play Again</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const winMessage = document.getElementById('winMessage');

        let score = 0;
        const targetScore = 10;
        let gameActive = true;

        const player = { x: 400, y: 400, size: 50, emoji: 'ðŸŽ‚' };
        const hearts = [];
        const particles = [];
        const stars = Array.from({length: 100}, () => ({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 2,
            opacity: Math.random()
        }));

        function spawnHeart() {
            if (hearts.length < 4 && gameActive) {
                hearts.push({
                    x: Math.random() * (canvas.width - 30),
                    y: -50,
                    speed: 1.5 + Math.random() * 2,
                    size: 35,
                    rotation: Math.random() * Math.PI * 2
                });
            }
        }

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            player.x = e.clientX - rect.left - player.size/2;
            player.y = e.clientY - rect.top - player.size/2;
        });

        function createParticles(x, y, color) {
            for (let i = 0; i < 15; i++) {
                particles.push({
                    x, y,
                    vx: (Math.random() - 0.5) * 8,
                    vy: (Math.random() - 0.5) * 8,
                    alpha: 1,
                    color: color || '#ffafbd'
                });
            }
        }

        function update() {
            if (!gameActive) return;

            spawnHeart();

            hearts.forEach((heart, index) => {
                heart.y += heart.speed;
                heart.rotation += 0.02;

                if (player.x < heart.x + heart.size &&
                    player.x + player.size > heart.x &&
                    player.y < heart.y + heart.size &&
                    player.y + player.size > heart.y) {
                    
                    createParticles(heart.x + 15, heart.y + 15);
                    hearts.splice(index, 1);
                    score++;
                    
                    if (score >= targetScore) {
                        gameActive = false;
                        winMessage.style.display = 'block';
                    }
                }
                if (heart.y > canvas.height) hearts.splice(index, 1);
            });

            particles.forEach((p, i) => {
                p.x += p.vx; p.y += p.vy;
                p.alpha -= 0.015;
                if (p.alpha <= 0) particles.splice(i, 1);
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 1. Draw Twinkling Stars
            stars.forEach(s => {
                ctx.fillStyle = `rgba(255, 255, 255, ${Math.abs(Math.sin(Date.now() * 0.001 + s.opacity * 10))})`;
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
                ctx.fill();
            });

            // 2. Draw Score Glow
            ctx.fillStyle = '#ffafbd';
            ctx.font = '500 20px Quicksand';
            ctx.fillText(`Love Collected: ${score} / ${targetScore}`, 30, 45);

            // 3. Draw Player with Glow
            ctx.shadowBlur = 15;
            ctx.shadowColor = "rgba(255, 105, 180, 0.5)";
            ctx.font = '50px Arial';
            ctx.fillText(player.emoji, player.x, player.y + 45);
            ctx.shadowBlur = 0;

            // 4. Draw Floating Hearts
            hearts.forEach(h => {
                ctx.save();
                ctx.translate(h.x + 15, h.y + 15);
                ctx.rotate(Math.sin(Date.now() * 0.005) * 0.2); // Gentle sway
                ctx.font = '35px Arial';
                ctx.fillText('ðŸ’–', -15, 15);
                ctx.restore();
            });

            // 5. Draw Romantic Particles
            particles.forEach(p => {
                ctx.fillStyle = `rgba(255, 175, 189, ${p.alpha})`;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 3, 0, Math.PI*2);
                ctx.fill();
            });

            update();
            requestAnimationFrame(draw);
        }

        draw();
    </script>
</body>
</html>